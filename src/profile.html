<!DOCTYPE html>
<html>
<head>
  <title>Team 46 - Abdus Dogs</title>
      <!--main style-->
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main_style.css">
    <script type="javascript" src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script type="javascript" src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    
    <!--comfortaa font-->
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300&display=swap" rel="stylesheet">
    <!--favicon-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!--carousel stuff-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
    <!--nav bar-->
    <ul class="nav">
      <li class="nav" style="margin-left:130px"><a class="nav" href="/index.html">Home</a></li>
      <li class="nav"><a class="nav" href="aboutus.html">About Us</a></li>
      <li class="nav"><a class="nav" href="search.html">Search</a></li>
      <li class="nav"><a class="nav" href="more.html">More Resources</a></li>
      <li class="nav"><a class="nav" href="profile.html">My Profile</a></li>
  </ul>
  <br>
  <br>
  <p style="font-family: Comfortaa; text-align: center;">Enter your email to login/sign up</p>
  <img src="/images/yay.gif" style="display: block; margin:auto;width:200px;height:200px;object-fit:contain;">

  <!--change this plz-->
  <form id="loginForm" action="/register-route" method="post">
    <div style="margin: auto; width: 100%;">
        <label for="login" style="font-family: Comfortaa;">Enter your email:</label>
        <br>
        <input id="login" type="email" style="border-radius: 5px;" required></input>
    </div>
    <br>
    <button type="submit" class="formbutton">Login</button>
  </form>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('loginForm').addEventListener('submit', function (event) {
          event.preventDefault();
          const email = document.getElementById('login').value;
          console.log('fetching route');
          fetch('/register-route', {
              method: 'POST', 
              headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
              },
              body: `email=${encodeURIComponent(email)}`, // Send the email as part of the request body
              credentials: 'same-origin',
          })
              .then(response => response.text())
              .then(data => {
                  if (data === 'user exists') {
                      window.location.href = 'profile2.html';
                      alert("user already exists ooo: " + email);
                  }
                  else if (data =='user created') {
                      window.location.href = 'profile2.html';
                      alert("user created ooooooo: " + email);
                  }
                  else{
                    alert("internal error");
                  }
              })
              .catch(error => {
                  alert("an error happened with the route");
              });
      });
  });
  </script>
  <!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('loginForm').addEventListener('submit', function (event) {
          event.preventDefault();
          const email = document.getElementById('login').value;
          console.log('fetching route');
          fetch('/test-route', {
              method: 'POST', 
              headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
              },
              body: `email=${encodeURIComponent(email)}`, // Send the email as part of the request body
              credentials: 'same-origin',
          })
              .then(response => response.text())
              .then(data => {
                  if (data === 'Received email: ' + email) {
                      window.location.href = 'profile2.html';
                      alert("yay! received this email: " + email);
                  }
                  else{
                    alert("did not receive email");
                  }
              })
              .catch(error => {
                  alert("an error happened");
              });
      });
  });
</script> -->
</body>
</html>